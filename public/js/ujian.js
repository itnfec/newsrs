(()=>{var a=$("#btnPrev"),n=$("#btnNext"),i=$("#btnRagu"),t=Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),e=setInterval((function(){var a=document.getElementById("timer"),n=(new Date).getTime(),i=end-n,t=Math.floor(i%864e5/36e5),o=Math.floor(i%36e5/6e4),r=Math.floor(i%6e4/1e3);0==t&&o<5&&(a.style.color="red"),t<10&&(t="0"+t),o<10&&(o="0"+o),r<10&&(r="0"+r),a.innerHTML=t+":"+o+":"+r,i<0&&(clearInterval(e),a.innerHTML="WAKTU HABIS!",a.style.color="red",l())}),1e3);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.get({url:"/ujian/soal",data:{ujian_siswa_id:ujianSiswaid,page:t},success:function(t){var e=t.data[0],o=e.soal;$("#ujianHasilId").val(e.id),$("#noSoal").html(t.current_page),i.data("id",e.id),1!=e.ragu?i.prop("checked",!1):i.prop("checked",!0),$("#div-soal").html(o.pertanyaan);var l=e.jawaban;if(divJawaban=$("#div-jawaban"),divJawaban.html(""),"pilihan_ganda"==o.jenis){var r=o.pilihan,s="";r.forEach((function(a,n){s+='\n                    <div class="custom-control custom-radio">\n                        <input class="custom-control-input" type="radio" id="pilihan'.concat(n,'" name="jawaban" value="').concat(a.id,'" ').concat(l==a.id?"checked":"",'>\n                        <label for="pilihan').concat(n,'" class="custom-control-label">').concat(a.jawaban,"</label>\n                    </div>")})),divJawaban.html(s)}else divJawaban.html('\n                        <div class="form-grop">\n                            <label for="form-jawaban">Jawaban</label>\n                            <input class="form-control" name="jawaban" id="form-jawaban" value="'.concat(null!=l?l:"",'" placeholder="Masukkan jawaban...">\n                        </div>'));a.removeAttr("disabled"),a.data("id",t.current_page-1),null==t.prev_page_url&&a.attr("disabled","disabled"),n.removeAttr("disabled"),n.data("id",t.current_page+1),null==t.next_page_url&&n.attr("disabled","disabled")},error:function(a){console.log(a)}})}function l(){$.post({url:"/ujian/selesai",data:{ujian_siswa_id:ujianSiswaid},success:function(a){console.log(a),Swal.fire("Ujian Telah Berakhir","Anda akan dialihkan ke halaman Beranda","success").then((function(){window.location.href="/"}))}})}o(),a.on("click",(function(){o($(this).data().id)})),n.on("click",(function(){o($(this).data().id)})),i.on("change",(function(){var a=$(this).data(),n=$("#btnRagu:checked").length>0;$.post({url:"/ujian/ragu-ragu",data:{id:a.id,ragu:n?1:0},success:function(i){console.log(i);var t=$("#btnPilihan"+a.id);n?t.removeClass("btn-outline-primary").addClass("btn-warning"):(t.removeClass("btn-warning"),null!=i.jawaban?t.addClass("btn-primary"):t.addClass("btn-outline-primary"))}})})),$.get({url:"/ujian/daftar-soal",data:{ujian_siswa_id:ujianSiswaid},success:function(a){var n="";a.forEach((function(a,i){var t=1==a.ragu?"btn-warning":null!=a.jawaban?"btn-primary":"btn-outline-primary";n+='\n                <div class="col-md-3 col-sm-2 mb-3">\n                    <button class="btn btn-sm btn-block '.concat(t,' btn-pilihan" id="btnPilihan').concat(i+1,'" data-id="').concat(i+1,'">').concat(i+1,"</button>\n                </div>")})),$("#pilihan").html(n)}}),$(document).on("click",".btn-pilihan",(function(){o($(this).data().id)})),$("#formJawab").on("submit",(function(a){a.preventDefault();var n=new FormData(this);$.post({url:"/ujian/simpan-jawaban",data:n,contentType:!1,processData:!1,success:function(a){t.fire({icon:"success",title:"Jawaban berhasil disimpan"}),$("#btnPilihan"+n.get("id")).hasClass("btn-warning")||$("#btnPilihan"+n.get("id")).removeClass("btn-outline-primary").addClass("btn-primary")}})})),$("#btnAkhiri").on("click",(function(){Swal.fire({title:"Akhiri Ujian",text:"Anda yakin ingin mengakhiri ujian? Pastikan semua jawaban sudah terisi dengan benar",icon:"question",showCancelButton:!0,cancelButtonText:"Batal",confirmButtonText:"Yakin"}).then((function(a){console.log(a),a.value&&l()}))}))})();